# General patterns
UNICORN_PREFIX %{WORD}, \[%{GREEDYDATA:timestamp} #%{NUMBER:pid}\].* %{LOGLEVEL:loglevel} -- :
UNICORN_PROCESS_STATUS_LIST ready|complete|reaped

# Master related messages
UNICORN_MASTER_STARTUP %{UNICORN_PREFIX} master process %{UNICORN_PROCESS_STATUS_LIST:worker_status}
UNICORN_MASTER_SHUTDOWN %{UNICORN_PREFIX} master %{UNICORN_PROCESS_STATUS_LIST:worker_status}
UNICORN_STARTUP_LISTEN %{UNICORN_PREFIX} listening on addr=%{IP:listen_address}:%{NUMBER:port} fd=%{NUMBER}
UNICORN_STARTUP_GEMS   %{UNICORN_PREFIX} Refreshing Gem list
UNICORN_MASTER_MESSAGE %{UNICORN_MASTER_STARTUP}|%{UNICORN_MASTER_SHUTDOWN}|%{UNICORN_STARTUP_LISTEN}|%{UNICORN_STARTUP_GEMS}

# Worker related messages
UNICORN_WORKER_ACTION  %{UNICORN_PREFIX} %{WORKER_PROCESS_STATUS_LIST:worker_status} #<Process::Status: pid %{NUMBER:pid} %{GREEDYDATA:message}> worker=%{NUMBER:worker_id}, %{GREEDYDATA}
UNICORN_WORKER_STATUS  %{UNICORN_PREFIX} worker=%{NUMBER:worker_id} %{UNICORN_PROCESS_STATUS_LIST:worker_status}
UNICORN_WORKER_TIMEOUT %{UNICORN_PREFIX} worker=%{NUMBER:worker_id} PID:%{NUMBER:pid} %{GREEDYDATA:message}
UNICORN_WORKER_WARNING %{UNICORN_PREFIX} HTTPI executes HTTP POST using the net_http adapter
UNICORN_WORKER_MESSAGE %{UNICORN_WORKER_ACTION}|%{UNICORN_WORKER_STATUS}|%{UNICORN_WORKER_TIMEOUT}|%{UNICORN_WORKER_WARNING}

# Query stats
UNICORN_QUERY_STATS %{GREEDYDATA:timestamp}: %{NUMBER} - finished query: %{NUMBER:time_query:int}ms roundtrip: %{NUMBER:time_roundtrip:int}ms, hits: %{NUMBER:hit_count:int}

# Deprecation messages
UNICORN_DEPRECATION_MESSAGE \[DEPRECATION\] %{GREEDYDATA:message}

# Aggregations
UNICORN_MESSAGE %{UNICORN_WORKER_MESSAGE}|%{UNICORN_MASTER_MESSAGE}|%{UNICORN_DEPRECATION_MESSAGE}|%{UNICORN_QUERY_STATS}